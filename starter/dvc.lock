schema: '2.0'
stages:
  clean_data:
    cmd: python starter/clean_data.py
    deps:
    - path: data/census.csv
      md5: 145de00f6e6053d3f7044628f9a5b5ff
      size: 3974474
    - path: starter/clean_data.py
      md5: 5c3249d06a71d988f66d8c26eee153e2
      size: 1219
    outs:
    - path: data/cleaned_census.csv
      md5: 864f768c94aa0cdf64cc58281cac4835
      size: 3515983
  train_model:
    cmd: python starter/train_model.py
    deps:
    - path: data/train_cleaned_census.csv
      md5: 779f5f83ac43afed7caaa9f25627a114
      size: 2811824
    - path: starter/ml/data.py
      md5: fe1c4080059238fb6316dd43a7d9b5db
      size: 6141
    - path: starter/ml/model.py
      md5: fbc0555b5add1407bc5cff0b8fdc42b3
      size: 3955
    - path: starter/train_model.py
      md5: 4cd87a42108e7b4ae30e2cf093fb0b99
      size: 2465
    params:
      params.yaml:
        train_model.param_grid:
          n_estimators:
          - 2
          - 5
          max_features:
          - auto
          - sqrt
          max_depth:
          - 4
          - 5
          - 10
          criterion:
          - gini
          - entropy
        train_model.random_state: 42
        train_model.test_size: 0.2
    outs:
    - path: model/encoder.pkl
      md5: 3ff7b0a716b1573b02ea4b22782fbd12
      size: 1595
    - path: model/lb.pkl
      md5: 68d67643c2f11e180eaa335146ade2ea
      size: 403
    - path: model/model.pkl
      md5: 7e6666375b8505fb2ea9c46b91678ac4
      size: 189980
    - path: model/score.json
      md5: 740f3cd57ec327155823a35b9bb941ea
      size: 126
  segregate_data:
    cmd: python starter/segregate.py
    deps:
    - path: data/cleaned_census.csv
      md5: 864f768c94aa0cdf64cc58281cac4835
      size: 3515983
    - path: starter/segregate.py
      md5: 1ad8db25a16b3c75ad1baa334111b8a4
      size: 2018
    params:
      params.yaml:
        segregate_data.random_state: 42
        segregate_data.test_size: 0.2
    outs:
    - path: data/test_cleaned_census.csv
      md5: 7785dbfd0af63fe8d42bc9c30e673eff
      size: 704314
    - path: data/train_cleaned_census.csv
      md5: 779f5f83ac43afed7caaa9f25627a114
      size: 2811824
  inference:
    cmd: python starter/inference.py
    deps:
    - path: data/test_cleaned_census.csv
      md5: 7785dbfd0af63fe8d42bc9c30e673eff
      size: 704314
    - path: model/encoder.pkl
      md5: a553f204feb7d25cff7013915fd7ce8a
      size: 3898
    - path: model/lb.pkl
      md5: a553f204feb7d25cff7013915fd7ce8a
      size: 3898
    - path: model/model.pkl
      md5: c0803e41195ee1548140147d3dbb31f9
      size: 7252685
    - path: starter/inference.py
      md5: d73904a4060ed30ff97c8d5316a19544
      size: 1438
    - path: starter/ml/data.py
      md5: 953d9f319ea81adc14bdf6194e3561db
      size: 4457
    - path: starter/ml/model.py
      md5: ff3320807d84a247ab4b5bb5e871cf1c
      size: 2743
  evaluate:
    cmd: python starter/evaluate.py
    deps:
    - path: data/test_cleaned_census.csv
      md5: 7785dbfd0af63fe8d42bc9c30e673eff
      size: 704314
    - path: model/encoder.pkl
      md5: 3ff7b0a716b1573b02ea4b22782fbd12
      size: 1595
    - path: model/lb.pkl
      md5: 68d67643c2f11e180eaa335146ade2ea
      size: 403
    - path: model/model.pkl
      md5: 7e6666375b8505fb2ea9c46b91678ac4
      size: 189980
    - path: starter/evaluate.py
      md5: ff2762bd544d33fded275e080f10d033
      size: 2195
    - path: starter/ml/data.py
      md5: fe1c4080059238fb6316dd43a7d9b5db
      size: 6141
    - path: starter/ml/model.py
      md5: fbc0555b5add1407bc5cff0b8fdc42b3
      size: 3955
