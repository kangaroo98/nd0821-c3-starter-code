schema: '2.0'
stages:
  clean_data:
    cmd: python starter/clean_data.py
    deps:
    - path: data/census.csv
      md5: 145de00f6e6053d3f7044628f9a5b5ff
      size: 3974474
    - path: starter/clean_data.py
      md5: db4a6ce7af84168d9c1b58cedd921f2f
      size: 1806
    outs:
    - path: data/cleaned_census.csv
      md5: e6a84d6d980bd406a0cc3cb1edf59300
      size: 3458318
  train_model:
    cmd: python starter/train_model.py
    deps:
    - path: data/train_cleaned_census.csv
      md5: f129ea4baab4c8054d3db03021e58a40
      size: 2766342
    - path: starter/ml/data.py
      md5: d07d4206e403a46d0ff3c9012bcf0e32
      size: 6774
    - path: starter/ml/model.py
      md5: 3f6576b99f94bce04f6974ce75f442b5
      size: 4136
    - path: starter/train_model.py
      md5: 4cd87a42108e7b4ae30e2cf093fb0b99
      size: 2465
    params:
      params.yaml:
        train_model.param_grid:
          n_estimators:
          - 20
          - 50
          max_features:
          - auto
          - sqrt
          max_depth:
          - 4
          - 5
          - 10
          criterion:
          - gini
          - entropy
        train_model.random_state: 42
        train_model.test_size: 0.2
    outs:
    - path: model/encoder.pkl
      md5: 3be1525f3ae2867d060ecc4bc1f39075
      size: 3040
    - path: model/lb.pkl
      md5: 68d67643c2f11e180eaa335146ade2ea
      size: 403
    - path: model/model.pkl
      md5: ccc50dd3c5df212872bc459223c67e71
      size: 1653947
    - path: model/score.json
      md5: 75701bd3d60682dc4178ceedd5473c0a
      size: 126
  segregate_data:
    cmd: python starter/segregate.py
    deps:
    - path: data/cleaned_census.csv
      md5: e6a84d6d980bd406a0cc3cb1edf59300
      size: 3458318
    - path: starter/segregate.py
      md5: 1ad8db25a16b3c75ad1baa334111b8a4
      size: 2018
    params:
      params.yaml:
        segregate_data.random_state: 42
        segregate_data.test_size: 0.2
    outs:
    - path: data/test_cleaned_census.csv
      md5: 039a3d9286c197ca12ae60f4c3b9fe14
      size: 692131
    - path: data/train_cleaned_census.csv
      md5: f129ea4baab4c8054d3db03021e58a40
      size: 2766342
  inference:
    cmd: python starter/inference.py
    deps:
    - path: data/test_cleaned_census.csv
      md5: 7785dbfd0af63fe8d42bc9c30e673eff
      size: 704314
    - path: model/encoder.pkl
      md5: a553f204feb7d25cff7013915fd7ce8a
      size: 3898
    - path: model/lb.pkl
      md5: a553f204feb7d25cff7013915fd7ce8a
      size: 3898
    - path: model/model.pkl
      md5: c0803e41195ee1548140147d3dbb31f9
      size: 7252685
    - path: starter/inference.py
      md5: d73904a4060ed30ff97c8d5316a19544
      size: 1438
    - path: starter/ml/data.py
      md5: 953d9f319ea81adc14bdf6194e3561db
      size: 4457
    - path: starter/ml/model.py
      md5: ff3320807d84a247ab4b5bb5e871cf1c
      size: 2743
  evaluate:
    cmd: python starter/evaluate.py
    deps:
    - path: data/test_cleaned_census.csv
      md5: 039a3d9286c197ca12ae60f4c3b9fe14
      size: 692131
    - path: model/encoder.pkl
      md5: 3be1525f3ae2867d060ecc4bc1f39075
      size: 3040
    - path: model/lb.pkl
      md5: 68d67643c2f11e180eaa335146ade2ea
      size: 403
    - path: model/model.pkl
      md5: ccc50dd3c5df212872bc459223c67e71
      size: 1653947
    - path: starter/evaluate.py
      md5: aa831216e7ef90120aba8716d7c6f8d9
      size: 1906
    - path: starter/ml/data.py
      md5: d07d4206e403a46d0ff3c9012bcf0e32
      size: 6774
    - path: starter/ml/model.py
      md5: 3f6576b99f94bce04f6974ce75f442b5
      size: 4136
